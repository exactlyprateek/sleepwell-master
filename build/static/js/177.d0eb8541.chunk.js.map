{"version":3,"sources":["views/product_service/ProductServiceReview.js"],"names":["ProductServiceReview","useState","reviews","setReviews","showAlertSuccess","setShowAlertSuccess","showAlertDanger","setShowAlertDanger","textMessage","setTextMessage","setIsActive","jwtToken","sessionStorage","getItem","deleteSize","reviewId","axios","delete","then","response","axiosReviews","catch","error","updateStatus","rstatus","formData","FormData","status","JSON","parse","console","log","append","post","headers","data","message","get","useEffect","xl","className","role","type","data-dismiss","aria-label","aria-hidden","scope","map","item","index","name","productName","description","onChange","id","checked","dateFormat","createdAt","onClick","confirmAlert","title","buttons","label"],"mappings":"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","file":"static/js/177.d0eb8541.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { useHistory, useLocation } from 'react-router-dom'\nimport {\n    // CBadge,\n    CCard,\n    CCardBody,\n    CCardHeader,\n    CCol,\n    // CDataTable,\n    CRow,\n    // CPagination,\n    CLink\n} from '@coreui/react'\nimport axios from 'axios'\nimport dateFormat from 'dateformat'\nimport { confirmAlert } from 'react-confirm-alert'\nimport 'react-confirm-alert/src/react-confirm-alert.css'; // Import css\nimport Switch from \"react-switch\";\n\nconst ProductServiceReview = () => {\n    const [reviews, setReviews] = useState([])\n    const [showAlertSuccess, setShowAlertSuccess] = useState(false);\n    const [showAlertDanger, setShowAlertDanger] = useState(false);\n    const [textMessage, setTextMessage] = useState('');\n    const [isActive, setIsActive] = useState(true);\n\n    const jwtToken = sessionStorage.getItem(\"token\");\n\n    const onChangeIsActive = (id,rstatus) => {\n        // console.log(id);\n        // setIsActive(!isActive);\n        updateStatus(id,rstatus);\n    }\n\n    // \n    const clickOnDelete = (reviewId) => {\n        confirmAlert({\n            title: 'Are you sure?',\n            message: 'You want to delete this item?',\n            buttons: [\n                {\n                    label: 'Yes, Delete it',\n                    onClick: () => deleteSize(reviewId)\n                },\n                {\n                    label: 'No',\n                    // onClick: () => alert('Click No')\n                }\n            ]\n        });\n    }\n    //* call delete api\n    const deleteSize = (reviewId) => {\n        axios.delete(`http://markbran.in/apis/admin/review/${reviewId}`)\n            .then(function (response) {\n                setShowAlertSuccess(true);\n                setShowAlertDanger(false);\n                axiosReviews();\n            })\n            .catch(function (error) {\n                setShowAlertSuccess(false);\n                setShowAlertDanger(true);\n            })\n    }\n    // * update status\n    const updateStatus = (reviewId, rstatus) => {\n        const formData = new FormData();\n        let status = JSON.parse(rstatus)?1:0 ;\n        console.log(status);\n        formData.append('status', (!status ? 1 : 0));\n        axios.post(`http://markbran.in/apis/admin/review/${reviewId}`, formData, {\n            headers: {\n                \"auth-token\": jwtToken //the token is a variable which holds the token\n            }\n        })\n            .then(response => {\n                // setLoading(false);\n                // history.push('/sizes')\n                console.log(response);\n                // setError(null);\n                setShowAlertSuccess(true);\n                setShowAlertDanger(false);\n                setTextMessage('Review approved!.');\n\n                axiosReviews();\n            })\n            .catch(error => {\n                // console.log(error.response);\n                if (error.response && error.response.data.message) {\n                    setShowAlertSuccess(false);\n                    setShowAlertDanger(true);\n                    setTextMessage(error.response.data.message);\n                } else {\n                    setShowAlertSuccess(false);\n                    setShowAlertDanger(true);\n                    setTextMessage(\"Something went wrong, try again!.\");\n                }\n                axiosReviews();\n                // setIsActive(isActive);\n            });\n    }\n    const axiosReviews = () => {\n        axios.get('http://markbran.in/apis/admin/review', {\n            headers: {\n                \"auth-token\": jwtToken //the token is a variable which holds the token\n            }\n        })\n            .then(function (response) {\n                console.log(response.data.reviews);\n                setReviews(response.data.reviews);\n                // setIsActive(response.data.reviews.status?true:false);\n                setShowAlertSuccess(false);\n                setShowAlertDanger(false);\n            })\n            .catch(function (error) {\n                // console.log(error);\n                // console.log(error.response.data.message);\n                if (error.response && error.response.data.message) {\n                    setShowAlertSuccess(false);\n                    setShowAlertDanger(true);\n                    setTextMessage(error.response.data.message);\n                }\n            });\n    }\n    useEffect(() => {\n        axiosReviews();\n        if (reviews) {\n            setIsActive(reviews.status);\n        }\n    }, [reviews.status]);\n    return (\n        <CRow>\n            <CCol xl={12}>\n                <CCard>\n                    <CCardHeader>\n                        Product/Service Reviews\n                        {/* <CLink style={{ float: 'right' }} className=\"btn btn-success\" to=\"/product-service-review/add\">\n                            Add\n                        </CLink> */}\n                    </CCardHeader>\n                    <CCardBody>\n                        {showAlertSuccess ? <div className=\"alert alert-success alert-dismissible fade show\" role=\"alert\">\n                            <strong>Deleted</strong> {textMessage ? textMessage : 'Your item has been deleted successfully.'}\n                            <button type=\"button\" className=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">\n                                <span aria-hidden=\"true\">&times;</span>\n                            </button>\n                        </div> : null}\n                        {showAlertDanger ? <div className=\"alert alert-warning alert-dismissible fade show\" role=\"alert\">\n                            <strong>Alert </strong> {textMessage ? textMessage : 'Something went wrong try again later !.'}\n                            <button type=\"button\" className=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">\n                                <span aria-hidden=\"true\">&times;</span>\n                            </button>\n                        </div> : null}\n                        <table className=\"table table-hover\">\n                            <thead>\n                                <tr>\n                                    <th scope=\"col\">#</th>\n                                    <th scope=\"col\">Title</th>\n                                    <th scope=\"col\">Product</th>\n                                    <th scope=\"col\">Review</th>\n                                    <th scope=\"col\">Approve</th>\n                                    <th scope=\"col\">Create at</th>\n                                    <th scope=\"col\">Action</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                {reviews.map((item, index) =>\n                                    <tr key={item.id}>\n                                        <th scope=\"row\">{index + 1}</th>\n                                        <td>{item.name}</td>\n                                        <td>{item.productName}</td>\n                                        <td>{item.description}</td>\n                                        <td>\n                                            <Switch onChange={() => onChangeIsActive(item.id,item.status)} checked={JSON.parse(item.status)?true:false} />\n                                        </td>\n                                        <td>{dateFormat(item.createdAt, \"mmmm dS, yyyy\")}</td>\n                                        <td>\n                                            {/* <CLink className=\"btn btn-sm btn-outline-warning\" to={`/sizes/edit-size/${item.id}`}>\n                                                Edit\n                                            </CLink> */}\n                                            <button onClick={() => clickOnDelete(item.id)} type=\"button\" className=\"btn btn-sm btn-outline-danger\">Delete</button>\n                                        </td>\n                                    </tr>\n                                )}\n\n                            </tbody>\n                        </table>\n                    </CCardBody>\n                </CCard>\n            </CCol>\n        </CRow>\n    )\n\n}\n\nexport default ProductServiceReview;\n"],"sourceRoot":""}