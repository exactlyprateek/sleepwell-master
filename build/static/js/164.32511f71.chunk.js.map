{"version":3,"sources":["views/product/Products.js"],"names":["Products","history","useHistory","queryPage","useLocation","search","match","currentPage","Number","useState","page","setPage","products","setProducts","showAlertSuccess","setShowAlertSuccess","showAlertDanger","setShowAlertDanger","textMessage","setTextMessage","jwtToken","sessionStorage","getItem","useEffect","axios","get","headers","then","response","console","log","data","catch","error","message","getBadge","status","xl","className","style","float","to","role","type","data-dismiss","aria-label","aria-hidden","items","fields","key","_classes","hover","striped","itemsPerPage","activePage","clickableRows","scopedSlots","item","color","onActivePageChange","newPage","push","pages","doubleArrows","align"],"mappings":"iLAqIeA,UAjHE,WACb,IAAMC,EAAUC,cACVC,EAAYC,cAAcC,OAAOC,MAAM,gBAAiB,IACxDC,EAAcC,OAAOL,GAAaA,EAAU,GAAKA,EAAU,GAAK,GACtE,EAAwBM,mBAASF,GAAjC,mBAAOG,EAAP,KAAaC,EAAb,KACA,EAAgCF,mBAAS,IAAzC,mBAAOG,EAAP,KAAiBC,EAAjB,KAEA,EAAgDJ,oBAAS,GAAzD,mBAAOK,EAAP,KAAyBC,EAAzB,KACA,EAA8CN,oBAAS,GAAvD,mBAAOO,EAAP,KAAwBC,EAAxB,KACA,EAAsCR,mBAAS,IAA/C,mBAAOS,EAAP,KAAoBC,EAApB,KAEMC,EAAWC,eAAeC,QAAQ,SAyBxCC,qBAAU,WAjBNC,IAAMC,IAAI,wCAAyC,CAC/CC,QAAS,CACL,aAAcN,KAGjBO,MAAK,SAAUC,GACZC,QAAQC,IAAIF,EAASG,KAAKnB,UAC1BC,EAAYe,EAASG,KAAKnB,aAE7BoB,OAAM,SAAUC,GACTA,EAAML,UAAYK,EAAML,SAASG,KAAKG,UACtCnB,GAAoB,GACpBE,GAAmB,GACnBE,EAAec,EAAML,SAASG,KAAKG,aAM/C3B,IAAgBG,GAAQC,EAAQJ,KACjC,CAACA,EAAaG,IAEjB,IAAMyB,EAAW,SAAAC,GACb,OAAQA,GACJ,IAAK,SAAU,MAAO,UACtB,IAAK,WAAY,MAAO,YACxB,IAAK,UAAW,MAAO,UACvB,IAAK,SAAU,MAAO,SACtB,QAAS,MAAO,YAGxB,OACI,cAAC,KAAD,UACI,cAAC,IAAD,CAAMC,GAAI,GAAV,SACI,eAAC,IAAD,WACI,eAAC,IAAD,sBAEI,cAAC,KAAD,CAAOC,UAAU,kBAAkBC,MAAO,CAAEC,MAAO,SAAWC,GAAG,eAAjE,4BAKJ,eAAC,IAAD,WACK3B,EAAmB,sBAAKwB,UAAU,kDAAkDI,KAAK,QAAtE,UAChB,6CADgB,4CAEhB,wBAAQC,KAAK,SAASL,UAAU,QAAQM,eAAa,QAAQC,aAAW,QAAxE,SACI,sBAAMC,cAAY,OAAlB,uBAEC,KACR9B,EAAkB,sBAAKsB,UAAU,kDAAkDI,KAAK,QAAtE,UACf,4CADe,IACUxB,GAA4B,0CACrD,wBAAQyB,KAAK,SAASL,UAAU,QAAQM,eAAa,QAAQC,aAAW,QAAxE,SACI,sBAAMC,cAAY,OAAlB,uBAEC,KACT,cAAC,IAAD,CACIC,MAAOnC,EAEPoC,OAAQ,CACJ,CAAEC,IAAK,cAAeC,SAAU,oBAChC,WAAY,cAAe,kBAE/BC,OAAK,EACLC,SAAO,EACPC,aAAc,EACdC,WAAY5C,EACZ6C,eAAa,EAEbC,YAAa,CACT,OACI,SAACC,GAAD,OACI,6BACI,cAAC,IAAD,CAAQC,MAAOvB,EAASsB,EAAKrB,QAA7B,SACKqB,EAAKrB,eAM9B,cAAC,KAAD,CACIkB,WAAY5C,EACZiD,mBAtFL,SAAAC,GACfrD,IAAgBqD,GAAW3D,EAAQ4D,KAAR,yBAA+BD,KAsFtCE,MAAO,EAEPC,cAAc,EACdC,MAAM","file":"static/js/164.32511f71.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { useHistory, useLocation } from 'react-router-dom'\r\nimport {\r\n    CBadge,\r\n    CCard,\r\n    CCardBody,\r\n    CCardHeader,\r\n    CCol,\r\n    CDataTable,\r\n    CRow,\r\n    CPagination,\r\n    CLink\r\n} from '@coreui/react'\r\nimport axios from 'axios'\r\n\r\n// import usersData from '../users/UsersData'\r\nimport productsData from './ProductsData'\r\n\r\n\r\n\r\nconst Products = () => {\r\n    const history = useHistory()\r\n    const queryPage = useLocation().search.match(/page=([0-9]+)/, '')\r\n    const currentPage = Number(queryPage && queryPage[1] ? queryPage[1] : 1)\r\n    const [page, setPage] = useState(currentPage)\r\n    const [products, setProducts] = useState([]);\r\n\r\n    const [showAlertSuccess, setShowAlertSuccess] = useState(false);\r\n    const [showAlertDanger, setShowAlertDanger] = useState(false);\r\n    const [textMessage, setTextMessage] = useState('');\r\n\r\n    const jwtToken = sessionStorage.getItem(\"token\");\r\n\r\n\r\n    const pageChange = newPage => {\r\n        currentPage !== newPage && history.push(`/products?page=${newPage}`)\r\n    }\r\n\r\n    const axiosProducts = () => {\r\n        axios.get('http://markbran.in/apis/admin/product', {\r\n            headers: {\r\n                \"auth-token\": jwtToken //the token is a variable which holds the token\r\n            }\r\n        })\r\n            .then(function (response) {\r\n                console.log(response.data.products);\r\n                setProducts(response.data.products);\r\n            })\r\n            .catch(function (error) {\r\n                if (error.response && error.response.data.message) {\r\n                    setShowAlertSuccess(false);\r\n                    setShowAlertDanger(true);\r\n                    setTextMessage(error.response.data.message);\r\n                }\r\n            });\r\n    }\r\n    useEffect(() => {\r\n        axiosProducts();\r\n        currentPage !== page && setPage(currentPage)\r\n    }, [currentPage, page])\r\n\r\n    const getBadge = status => {\r\n        switch (status) {\r\n            case 'Active': return 'success'\r\n            case 'Inactive': return 'secondary'\r\n            case 'Pending': return 'warning'\r\n            case 'Banned': return 'danger'\r\n            default: return 'primary'\r\n        }\r\n    }\r\n    return (\r\n        <CRow>\r\n            <CCol xl={12}>\r\n                <CCard>\r\n                    <CCardHeader>\r\n                        Products\r\n                        <CLink className=\"btn btn-success\" style={{ float: 'right' }} to=\"/add-product\">\r\n                            Add Product\r\n                        </CLink>\r\n                      {/* <small  className=\"text-muted\"> example</small> */}\r\n                    </CCardHeader>\r\n                    <CCardBody>\r\n                        {showAlertSuccess ? <div className=\"alert alert-success alert-dismissible fade show\" role=\"alert\">\r\n                            <strong>Deleted</strong> Your item has been deleted successfully.\r\n                            <button type=\"button\" className=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">\r\n                                <span aria-hidden=\"true\">&times;</span>\r\n                            </button>\r\n                        </div> : null}\r\n                        {showAlertDanger ? <div className=\"alert alert-warning alert-dismissible fade show\" role=\"alert\">\r\n                            <strong>Alert </strong> {textMessage ? textMessage : 'Something went wrong try again later !.'}\r\n                            <button type=\"button\" className=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">\r\n                                <span aria-hidden=\"true\">&times;</span>\r\n                            </button>\r\n                        </div> : null}\r\n                        <CDataTable\r\n                            items={products}\r\n                            // items={productsData}\r\n                            fields={[\r\n                                { key: 'productName', _classes: 'font-weight-bold' },\r\n                                'category', 'subCategory', 'subSubCategory'\r\n                            ]}\r\n                            hover\r\n                            striped\r\n                            itemsPerPage={5}\r\n                            activePage={page}\r\n                            clickableRows\r\n                            // onRowClick={(item) => history.push(`/users/${item.id}`)}\r\n                            scopedSlots={{\r\n                                'status':\r\n                                    (item) => (\r\n                                        <td>\r\n                                            <CBadge color={getBadge(item.status)}>\r\n                                                {item.status}\r\n                                            </CBadge>\r\n                                        </td>\r\n                                    )\r\n                            }}\r\n                        />\r\n                        <CPagination\r\n                            activePage={page}\r\n                            onActivePageChange={pageChange}\r\n                            pages={1}\r\n                            // pages={products.length}\r\n                            doubleArrows={false}\r\n                            align=\"center\"\r\n                        />\r\n                    </CCardBody>\r\n                </CCard>\r\n            </CCol>\r\n        </CRow>\r\n    )\r\n}\r\n\r\nexport default Products"],"sourceRoot":""}