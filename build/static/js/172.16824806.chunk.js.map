{"version":3,"sources":["views/product/Products.js"],"names":["Products","history","useHistory","queryPage","useLocation","search","match","currentPage","Number","useState","page","setPage","products","setProducts","productId","showAlertSuccess","setShowAlertSuccess","showAlertDanger","setShowAlertDanger","textMessage","setTextMessage","jwtToken","sessionStorage","getItem","useEffect","axios","get","headers","then","response","console","log","data","catch","error","message","to","xl","className","style","float","role","type","data-dismiss","aria-label","aria-hidden","scope","map","item","index","title","id","activePage","onActivePageChange","newPage","push","pages","length","doubleArrows","align"],"mappings":"iLAsLeA,UAnKE,WAChB,IAAMC,EAAUC,cACVC,EAAYC,cAAcC,OAAOC,MAAM,gBAAiB,IACxDC,EAAcC,OAAOL,GAAaA,EAAU,GAAKA,EAAU,GAAK,GACtE,EAA0BM,mBAASF,GAAnC,mBAAQG,EAAR,KAAcC,EAAd,KACA,EAAkCF,mBAAS,IAA3C,mBAAQG,EAAR,KAAkBC,EAAlB,KAEA,EAAoCJ,mBAAS,MAA7C,mBAAQK,EAAR,KACA,GADA,KACkDL,oBAAS,IAA3D,mBAAQM,EAAR,KAA0BC,EAA1B,KACA,EAAgDP,oBAAS,GAAzD,mBAAQQ,EAAR,KAAyBC,EAAzB,KACA,EAAwCT,mBAAS,IAAjD,mBAAQU,EAAR,KAAqBC,EAArB,KAEMC,EAAWC,eAAeC,QAAQ,SAiCxCC,qBACC,WAzBAC,IACEC,IAAI,yCAA0C,CAC9CC,QAAS,CACR,aAAcN,KAGfO,MAAK,SAASC,GACdC,QAAQC,IAAIF,EAASG,KAAKpB,UAO1BC,EAAYgB,EAASG,KAAKpB,aAE1BqB,OAAM,SAASC,GACXA,EAAML,UAAYK,EAAML,SAASG,KAAKG,UACzCnB,GAAoB,GACpBE,GAAmB,GACnBE,EAAec,EAAML,SAASG,KAAKG,aAOrC5B,IAAgBG,GAAQC,EAAQJ,KAEjC,CAAEA,EAAaG,IAiBhB,OAAII,EACI,cAAC,IAAD,CAAUsB,GAAE,wBAAmBtB,KAGtC,cAAC,KAAD,UACC,cAAC,IAAD,CAAMuB,GAAI,GAAV,SACC,eAAC,IAAD,WACC,eAAC,IAAD,sBAEC,cAAC,KAAD,CAAOC,UAAU,kBAAkBC,MAAO,CAAEC,MAAO,SAAWJ,GAAG,eAAjE,4BAKD,eAAC,IAAD,WACErB,EACA,sBAAKuB,UAAU,kDAAkDG,KAAK,QAAtE,UACC,6CADD,4CAEC,wBAAQC,KAAK,SAASJ,UAAU,QAAQK,eAAa,QAAQC,aAAW,QAAxE,SACC,sBAAMC,cAAY,OAAlB,uBAGC,KACH5B,EACA,sBAAKqB,UAAU,kDAAkDG,KAAK,QAAtE,UACC,4CAAwB,IACvBtB,GAA4B,0CAC7B,wBAAQuB,KAAK,SAASJ,UAAU,QAAQK,eAAa,QAAQC,aAAW,QAAxE,SACC,sBAAMC,cAAY,OAAlB,uBAGC,KAEJ,wBAAOP,UAAU,oBAAjB,UACC,gCACC,+BACC,oBAAIQ,MAAM,MAAV,eACA,oBAAIA,MAAM,MAAV,wBAGF,gCACElC,EAASmC,KAAI,SAACC,EAAMC,GAAP,OACb,+BACC,oBAAIH,MAAM,MAAV,SAAiBG,EAAQ,IACzB,6BAAKD,EAAKE,QACV,6BACC,cAAC,KAAD,CACCZ,UAAU,iCACVF,GAAE,wBAAmBY,EAAKG,IAF3B,sBAJOH,EAAKG,YAuCjB,cAAC,KAAD,CACCC,WAAY1C,EACZ2C,mBAxIa,SAACC,GACnB/C,IAAgB+C,GAAWrD,EAAQsD,KAAR,yBAA+BD,KAwIrDE,MAAO5C,EAAS6C,OAAS,EAEzBC,cAAc,EACdC,MAAM","file":"static/js/172.16824806.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Redirect, useHistory, useLocation } from 'react-router-dom';\r\nimport {\r\n\tCBadge,\r\n\tCCard,\r\n\tCCardBody,\r\n\tCCardHeader,\r\n\tCCol,\r\n\tCDataTable,\r\n\tCRow,\r\n\tCPagination,\r\n\tCLink,\r\n\tCButton\r\n} from '@coreui/react';\r\nimport axios from 'axios';\r\n\r\n// import usersData from '../users/UsersData'\r\nimport productsData from './ProductsData';\r\n\r\nconst Products = () => {\r\n\tconst history = useHistory();\r\n\tconst queryPage = useLocation().search.match(/page=([0-9]+)/, '');\r\n\tconst currentPage = Number(queryPage && queryPage[1] ? queryPage[1] : 1);\r\n\tconst [ page, setPage ] = useState(currentPage);\r\n\tconst [ products, setProducts ] = useState([]);\r\n\r\n\tconst [ productId, setProductId ] = useState(null);\r\n\tconst [ showAlertSuccess, setShowAlertSuccess ] = useState(false);\r\n\tconst [ showAlertDanger, setShowAlertDanger ] = useState(false);\r\n\tconst [ textMessage, setTextMessage ] = useState('');\r\n\r\n\tconst jwtToken = sessionStorage.getItem('token');\r\n\r\n\tconst pageChange = (newPage) => {\r\n\t\tcurrentPage !== newPage && history.push(`/products?page=${newPage}`);\r\n\t};\r\n\tconst handleEdit = (id) => {\r\n\t\tsetProductId(id);\r\n\t};\r\n\tconst axiosProducts = () => {\r\n\t\taxios\r\n\t\t\t.get('http://markbran.in/apis/admin/products', {\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'auth-token': jwtToken //the token is a variable which holds the token\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.then(function(response) {\r\n\t\t\t\tconsole.log(response.data.products);\r\n\t\t\t\t// let prods = response.data.products.map((i) => {\r\n\t\t\t\t// \treturn {\r\n\t\t\t\t// \t\t...i,\r\n\t\t\t\t// \t\taction: () => {return <CButton onClick={() => handleEdit(i.id)} size=\"sm\" className=\"btn btn-warning\" />}\r\n\t\t\t\t// \t};\r\n\t\t\t\t// });\r\n\t\t\t\tsetProducts(response.data.products);\r\n\t\t\t})\r\n\t\t\t.catch(function(error) {\r\n\t\t\t\tif (error.response && error.response.data.message) {\r\n\t\t\t\t\tsetShowAlertSuccess(false);\r\n\t\t\t\t\tsetShowAlertDanger(true);\r\n\t\t\t\t\tsetTextMessage(error.response.data.message);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\taxiosProducts();\r\n\t\t\tcurrentPage !== page && setPage(currentPage);\r\n\t\t},\r\n\t\t[ currentPage, page ]\r\n\t);\r\n\r\n\tconst getBadge = (status) => {\r\n\t\tswitch (status) {\r\n\t\t\tcase 'Active':\r\n\t\t\t\treturn 'success';\r\n\t\t\tcase 'Inactive':\r\n\t\t\t\treturn 'secondary';\r\n\t\t\tcase 'Pending':\r\n\t\t\t\treturn 'warning';\r\n\t\t\tcase 'Banned':\r\n\t\t\t\treturn 'danger';\r\n\t\t\tdefault:\r\n\t\t\t\treturn 'primary';\r\n\t\t}\r\n\t};\r\n\tif (productId) {\r\n\t\treturn <Redirect to={`/edit-product/${productId}`} />;\r\n\t}\r\n\treturn (\r\n\t\t<CRow>\r\n\t\t\t<CCol xl={12}>\r\n\t\t\t\t<CCard>\r\n\t\t\t\t\t<CCardHeader>\r\n\t\t\t\t\t\tProducts\r\n\t\t\t\t\t\t<CLink className=\"btn btn-success\" style={{ float: 'right' }} to=\"/add-product\">\r\n\t\t\t\t\t\t\tAdd Product\r\n\t\t\t\t\t\t</CLink>\r\n\t\t\t\t\t\t{/* <small  className=\"text-muted\"> example</small> */}\r\n\t\t\t\t\t</CCardHeader>\r\n\t\t\t\t\t<CCardBody>\r\n\t\t\t\t\t\t{showAlertSuccess ? (\r\n\t\t\t\t\t\t\t<div className=\"alert alert-success alert-dismissible fade show\" role=\"alert\">\r\n\t\t\t\t\t\t\t\t<strong>Deleted</strong> Your item has been deleted successfully.\r\n\t\t\t\t\t\t\t\t<button type=\"button\" className=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">\r\n\t\t\t\t\t\t\t\t\t<span aria-hidden=\"true\">&times;</span>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t{showAlertDanger ? (\r\n\t\t\t\t\t\t\t<div className=\"alert alert-warning alert-dismissible fade show\" role=\"alert\">\r\n\t\t\t\t\t\t\t\t<strong>Alert </strong>{' '}\r\n\t\t\t\t\t\t\t\t{textMessage ? textMessage : 'Something went wrong try again later !.'}\r\n\t\t\t\t\t\t\t\t<button type=\"button\" className=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">\r\n\t\t\t\t\t\t\t\t\t<span aria-hidden=\"true\">&times;</span>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t) : null}\r\n\r\n\t\t\t\t\t\t<table className=\"table table-hover\">\r\n\t\t\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t<th scope=\"col\">#</th>\r\n\t\t\t\t\t\t\t\t\t<th scope=\"col\">Title</th>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t{products.map((item, index) => (\r\n\t\t\t\t\t\t\t\t\t<tr key={item.id}>\r\n\t\t\t\t\t\t\t\t\t\t<th scope=\"row\">{index + 1}</th>\r\n\t\t\t\t\t\t\t\t\t\t<td>{item.title}</td>\r\n\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t<CLink\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn btn-sm btn-outline-warning\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tto={`/edit-product/${item.id}`}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\tEdit\r\n\t\t\t\t\t\t\t\t\t\t\t</CLink>\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t{/* <CDataTable\r\n\t\t\t\t\t\t\titems={products}\r\n\t\t\t\t\t\t\t// items={productsData}\r\n\t\t\t\t\t\t\tfields={[\r\n\t\t\t\t\t\t\t\t{ key: 'productName', _classes: 'font-weight-bold' },\r\n\t\t\t\t\t\t\t\t'category',\r\n\t\t\t\t\t\t\t\t'subCategory',\r\n\t\t\t\t\t\t\t\t'subSubCategory',\r\n\t\t\t\t\t\t\t\t'action'\r\n\t\t\t\t\t\t\t]}\r\n\t\t\t\t\t\t\thover\r\n\t\t\t\t\t\t\tstriped\r\n\t\t\t\t\t\t\titemsPerPage={5}\r\n\t\t\t\t\t\t\tactivePage={page}\r\n\t\t\t\t\t\t\tclickableRows\r\n\t\t\t\t\t\t\t// onRowClick={(item) => history.push(`/users/${item.id}`)}\r\n\t\t\t\t\t\t\tscopedSlots={{\r\n\t\t\t\t\t\t\t\tstatus: (item) => (\r\n\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t<CBadge color={getBadge(item.status)}>{item.status}</CBadge>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/> */}\r\n\t\t\t\t\t\t<CPagination\r\n\t\t\t\t\t\t\tactivePage={page}\r\n\t\t\t\t\t\t\tonActivePageChange={pageChange}\r\n\t\t\t\t\t\t\tpages={products.length / 5}\r\n\t\t\t\t\t\t\t// pages={products.length}\r\n\t\t\t\t\t\t\tdoubleArrows={false}\r\n\t\t\t\t\t\t\talign=\"center\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</CCardBody>\r\n\t\t\t\t</CCard>\r\n\t\t\t</CCol>\r\n\t\t</CRow>\r\n\t);\r\n};\r\n\r\nexport default Products;\r\n"],"sourceRoot":""}